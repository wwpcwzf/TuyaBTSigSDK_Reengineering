/****************************************************************************************
> File Name: lutec_tick.c
> Description：
> Log:    Author     Time            modification
        | wwpc       2021/2/3        Create
        |
******************************************************************************************/


#include "lutec_tick.h"

#include "ty_timer_event.h"



static u32 tick_counter = 0;//10ms分辨率


/*-------------------------------------------------------------------------
*简  介: 
*参  数: 
*返回值: 
-------------------------------------------------------------------------*/
void lutec_tick_start(void)
{
    ty_timer_event_add(lutec_tick_callback, 9999);  
}


/*-------------------------------------------------------------------------
*简  介: 
*参  数: 
*返回值: 
-------------------------------------------------------------------------*/
int lutec_tick_callback(void)
{
    tick_counter++;
    return 0;
}


/*-------------------------------------------------------------------------
*简  介: 
*参  数: 
*返回值: 
-------------------------------------------------------------------------*/
u32 lutec_get_tick_10ms(void)
{
    return tick_counter == 0 ? 1 : tick_counter;
}


/*-------------------------------------------------------------------------
*简  介: 
*参  数: 
*返回值: 
-------------------------------------------------------------------------*/
u32 lutec_get_interval_tick_10ms(u32 base_tick)
{
    if(tick_counter >= base_tick)
    {
        return (tick_counter - base_tick);
    }
    else
    {
        return ((0xFFFFFFFF - base_tick) + tick_counter);
    }
}






/***************************************File end********************************************/

